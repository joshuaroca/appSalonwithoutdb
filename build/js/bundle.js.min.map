{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","mostrarResumen","nombreCita","fechaCita","deshabilitarFechaAnterior","horaCita","document","querySelectorAll","forEach","enlace","addEventListener","e","preventDefault","parseInt","target","dataset","paso","seccionAnterior","querySelector","classList","remove","tabAnterior","add","async","resultado","fetch","db","json","servicio","id","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","idServicio","onclick","seleccionarServicio","appendChild","error","console","log","elemento","tagName","parentElement","contains","eliminarServicio","servicioObj","firstElementChild","nextSibling","agregarServicio","filter","resumenDiv","firstChild","removeChild","Object","values","includes","noServicios","serviciosCita","headingCita","innerHTML","headingServicios","cantidad","contenedorServicio","textoServicio","totalServicio","split","trim","cantidadPagar","nombreTexto","value","length","mostrarAlerta","alerta","mensaje","tipo","setTimeout","fechaInput","dia","Date","getUTCDay","inputFecha","fechaActual","year","getFullYear","mes","getMonth","toString","getDate","fechaDeshabilitar","join","min","inputHora"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina = 1;\n\nconst cita = {\n    nombre: '',\n    fecha: '',\n    hora: '',\n    servicios: []\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    iniciarApp();\n});\n\nfunction iniciarApp() {\n    mostrarServicios();\n\n    //Resalta el div Actal segun el tab seleccionado\n    mostrarSeccion();\n\n    // Oculta o muestra una sección segun el tab al que se presiona\n    cambiarSeccion();\n\n    // Paginacion siguiente y anterior\n    paginaSiguiente();\n    paginaAnterior();\n\n    // Comprueba la pagina actual para ocultar o mostrar la paginacion\n    botonesPaginador();\n\n    // Muestra el resumen de la cita ( o mensaje de error en caso de no pasar la validación )\n    mostrarResumen();\n\n\n    // Almacena el nombre de la cita en el objeto\n    nombreCita();\n\n\n    // Almacena la fecha de la cita en el objeto\n    fechaCita();\n\n\n    // deshabilita dias pasados\n    deshabilitarFechaAnterior();\n    // Almacena la hora de la cita en el objeto\n    horaCita();\n}\n\n\nfunction cambiarSeccion() {\n    const enlaces = document.querySelectorAll(\".tabs button\");\n\n    enlaces.forEach((enlace) => {\n        enlace.addEventListener(\"click\", (e) => {\n            e.preventDefault();\n            pagina = parseInt(e.target.dataset.paso);\n\n\n            mostrarSeccion();\n            botonesPaginador()\n        })\n    })\n}\n\nfunction mostrarSeccion() {\n    //Eliminar mostrar-seccion de la seccion anterior\n\n    const seccionAnterior = document.querySelector('.mostrar-seccion');\n    if (seccionAnterior) {\n        seccionAnterior.classList.remove('mostrar-seccion');\n\n    }\n    //eliminar la clase de actual del tab anterior\n    const tabAnterior = document.querySelector('.tabs button.actual');\n    if (tabAnterior) {\n        tabAnterior.classList.remove('actual');\n\n    }\n\n    const seccionActual = document.querySelector(`#paso-${pagina}`);\n    seccionActual.classList.add('mostrar-seccion')\n\n    //resalta el tab actual\n    const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\n    tab.classList.add('actual');\n}\n\n\nasync function mostrarServicios() {\n    try {\n        const resultado = await fetch('./servicios.json');\n        const db = await resultado.json();\n\n        const { servicios } = db;\n\n        // Generar el HTML\n        servicios.forEach(servicio => {\n            const { id, nombre, precio } = servicio;\n\n            // DOM Scripting\n            // Generar nombre de servicio\n            const nombreServicio = document.createElement('P');\n            nombreServicio.textContent = nombre;\n            nombreServicio.classList.add('nombre-servicio');\n\n            // Generar el precio del servicio\n            const precioServicio = document.createElement('P');\n            precioServicio.textContent = `$ ${precio}`;\n            precioServicio.classList.add('precio-servicio');\n\n            // Generar div contenedor de servicio\n            const servicioDiv = document.createElement('DIV');\n            servicioDiv.classList.add('servicio');\n            servicioDiv.dataset.idServicio = id;\n\n            // Selecciona un servicio para la cita\n            servicioDiv.onclick = seleccionarServicio;\n\n\n            // Inyectar precio y nombre al div de servicio\n            servicioDiv.appendChild(nombreServicio);\n            servicioDiv.appendChild(precioServicio);\n\n            // Inyectarlo en el HTML\n            document.querySelector('#servicios').appendChild(servicioDiv);\n        })\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n\nfunction seleccionarServicio(e) {\n\n    let elemento;\n    // Forzar que el  elemento al cual le damos click sea el DIV \n    if (e.target.tagName === 'P') {\n        elemento = e.target.parentElement;\n    } else {\n        elemento = e.target;\n    }\n\n    if (elemento.classList.contains('seleccionado')) {\n        elemento.classList.remove('seleccionado');\n\n        const id = parseInt(elemento.dataset.idServicio);\n\n        eliminarServicio(id);\n    } else {\n\n        const servicioObj = {\n            id: parseInt(elemento.dataset.idServicio),\n            nombre: elemento.firstElementChild.textContent,\n            precio: elemento.firstElementChild.nextSibling.textContent\n        }\n        elemento.classList.add('seleccionado');\n        agregarServicio(servicioObj);\n    }\n}\n\nfunction eliminarServicio(id) {\n    const { servicios } = cita;\n    cita.servicios = servicios.filter((servicio) => servicio.id !== id);//interesante\n}\n\nfunction agregarServicio(servicioObj) {\n    const { servicios } = cita;\n    cita.servicios = [...servicios, servicioObj];\n}\n\n\n\n\n\n\nfunction paginaSiguiente() {\n    const paginaSiguiente = document.querySelector(\"#siguiente\");\n    paginaSiguiente.addEventListener('click', (e) => {\n        pagina++;\n        botonesPaginador()\n    })\n}\n\nfunction paginaAnterior() {\n    const paginaAnterior = document.querySelector(\"#anterior\");\n    paginaAnterior.addEventListener('click', (e) => {\n        pagina--;\n        botonesPaginador()\n    })\n}\n\nfunction botonesPaginador() {\n    const paginaAnterior = document.querySelector(\"#anterior\");\n    const paginaSiguiente = document.querySelector(\"#siguiente\");\n\n    if (pagina === 1) {\n        paginaAnterior.classList.add(\"ocultar\");\n        paginaSiguiente.classList.remove('ocultar');\n\n    } else if (pagina === 3) {\n        paginaSiguiente.classList.add(\"ocultar\");\n        paginaAnterior.classList.remove(\"ocultar\");\n        mostrarResumen();//estamos en la pag 3, cargar el resumen\n    } else {\n        paginaAnterior.classList.remove(\"ocultar\");\n        paginaSiguiente.classList.remove(\"ocultar\");\n    }\n    mostrarSeccion();\n\n}\n\nconst mostrarResumen = () => {\n    //destructuring\n    const { nombre, fecha, hora, servicios } = cita;\n\n    //seleccionar el resumen\n    const resumenDiv = document.querySelector('.contenido-resumen');\n\n    //limpia el contenido del html del resumen\n    while (resumenDiv.firstChild) {\n        resumenDiv.removeChild(resumenDiv.firstChild)\n    }\n\n\n    //validacion del objecto\n    if (Object.values(cita).includes('')) {\n        const noServicios = document.createElement('P');\n        noServicios.textContent = \"Faltan datos de servicios, hora, fecha, o nombre\";\n        noServicios.classList.add('invalidar-cita')\n        resumenDiv.appendChild(noServicios);\n    } else {\n        const serviciosCita = document.createElement('DIV');\n        serviciosCita.classList.add('resumen-servicios')\n\n        const headingCita = document.createElement('H3');\n        headingCita.textContent = 'Resumen de cita';\n\n        //mostrar el resumen\n        const nombreCita = document.createElement('P');\n        nombreCita.innerHTML = `<span>Nombre:</span> ${nombre}`;\n\n        const fechaCita = document.createElement('P');\n        fechaCita.innerHTML = `<span>Precio:</span> ${fecha}`;\n\n        const horaCita = document.createElement('P');\n        horaCita.innerHTML = `<span>Hora cita:</span> ${hora}`;\n\n        const headingServicios = document.createElement('H3');\n        headingServicios.textContent = 'Resumen de servicios';\n\n        serviciosCita.appendChild(headingServicios);\n\n        let cantidad = 0;\n\n        //iterar sobre el arreglo de servicios\n        servicios.forEach((servicio) => {\n            const { nombre, precio } = servicio;\n            const contenedorServicio = document.createElement(\"DIV\");\n            contenedorServicio.classList.add('contenedor-servicio');\n\n            const textoServicio = document.createElement('P');\n            textoServicio.textContent = nombre;\n\n\n            const precioServicio = document.createElement('P');\n            precioServicio.textContent = precio;\n            precioServicio.classList.add('precio')\n\n            const totalServicio = precio.split(\"$\")\n            cantidad += parseInt(totalServicio[1].trim());\n            //colocar texto y precio en el div\n            contenedorServicio.appendChild(textoServicio);\n            contenedorServicio.appendChild(precioServicio);\n\n            serviciosCita.appendChild(contenedorServicio);\n\n        })\n\n        resumenDiv.appendChild(headingCita);\n        resumenDiv.appendChild(nombreCita);\n        resumenDiv.appendChild(fechaCita);\n        resumenDiv.appendChild(horaCita);\n        resumenDiv.appendChild(serviciosCita);\n\n        const cantidadPagar = document.createElement('P');\n        cantidadPagar.classList.add('total')\n        cantidadPagar.innerHTML = `<span>Total a pagar: </span> $${cantidad}`;\n        resumenDiv.appendChild(cantidadPagar);\n\n    }\n}\n\n\n\n\n\nfunction nombreCita() {\n    const nombreInput = document.querySelector('#nombre');\n    nombreInput.addEventListener('input', (e) => {\n        const nombreTexto = e.target.value.trim();\n\n        if (nombreTexto === '' || nombreTexto.length < 3) {\n            mostrarAlerta(\"nombre no valido\", 'error')\n        } else {\n            const alerta = document.querySelector('.alerta');\n            if (alerta) {\n                alerta.remove();\n            }\n            cita.nombre = nombreTexto;\n        }\n    })\n}\n\nfunction mostrarAlerta(mensaje, tipo) {\n\n    //si hay una alerta, no crear otra \n    const alertaPrevia = document.querySelector('.alerta');\n    if (alertaPrevia) {\n        return;\n    }\n\n    const alerta = document.createElement('DIV');\n    alerta.textContent = mensaje;\n    alerta.classList.add('alerta');\n\n    if (tipo === 'error') {\n        alerta.classList.add('error')\n    }\n\n    //insertar en el html\n    const formulario = document.querySelector('.formulario');\n    formulario.appendChild(alerta);\n\n\n    //  eliminar la alerta despues de 3 segundos\n    setTimeout(() => {\n        alerta.remove();\n    }, 3000);\n}\n\nfunction fechaCita() {\n    const fechaInput = document.querySelector('#fecha');\n    fechaInput.addEventListener('input', (e) => {\n        const dia = new Date(e.target.value).getUTCDay();\n        if ([0].includes(dia)) {\n            e.preventDefault();\n            fechaInput.value = '';\n            mostrarAlerta('El Domingo no es un dia permitido', 'error');\n        } else {\n            cita.fecha = fechaInput.value;\n        }\n        console.log(cita\n        )\n    })\n}\n\nfunction deshabilitarFechaAnterior() {\n    const inputFecha = document.querySelector(\"#fecha\");\n    const fechaActual = new Date(),\n        year = fechaActual.getFullYear();\n    let mes = (fechaActual.getMonth() + 1).toString(),\n        dia = (fechaActual.getDate() + 1).toString();\n\n    //Formato: AAAA-MM-DD\n    mes.length < 2 ? mes = '0' + mes : mes;\n    dia.length < 2 ? dia = '0' + dia : dia;\n    const fechaDeshabilitar = [year, mes, dia].join('-');\n\n    inputFecha.min = fechaDeshabilitar;\n}\n\nfunction horaCita() {\n    const inputHora = document.querySelector(\"#hora\");\n    inputHora.addEventListener('input', e => {\n\n        const horaCita = e.target.value;\n        const hora = horaCita.split(\":\");\n        if (hora[0] < 8 || hora[0] > 20) {\n            mostrarAlerta('Hora no válida', 'error');\n            setTimeout(() => {\n                inputHora.value = '';\n            }, 2000);\n        } else {\n            cita.hora = horaCita\n        }\n    })\n}"]}